
<!DOCTYPE HTML>
<html lang="zh-hans" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>5 投影 · GDAL/OGR 中文手册</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        <meta name="author" content="llc">
        
        
    
    <link rel="stylesheet" href="style.css">

    
            
                
                <link rel="stylesheet" href="gitbook-plugin-search-pro/search.css">
                
            
                
                <link rel="stylesheet" href="gitbook-plugin-chapter-fold/chapter-fold.css">
                
            
                
                <link rel="stylesheet" href="gitbook-plugin-splitter/splitter.css">
                
            
                
                <link rel="stylesheet" href="gitbook-plugin-code/plugin.css">
                
            
                
                <link rel="stylesheet" href="gitbook-plugin-back-to-top-button/plugin.css">
                
            
                
                <link rel="stylesheet" href="gitbook-plugin-donate/plugin.css">
                
            
                
                <link rel="stylesheet" href="gitbook-plugin-auto-scroll-table/website.css">
                
            
                
                <link rel="stylesheet" href="gitbook-plugin-lightbox/css/lightbox.min.css">
                
            
                
                <link rel="stylesheet" href="gitbook-plugin-pageview-count/plugin.css">
                
            
                
                <link rel="stylesheet" href="gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="5 投影.html" />
    
    
    <link rel="prev" href="4 栅格图层.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="输入并搜索" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    0 简介
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="1 一般使用.html">
            
                <a href="1 一般使用.html">
            
                    
                    1 一般使用
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="1 一般使用.html">
            
                <a href="1 一般使用.html#检测安装">
            
                    
                    检测安装
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="1 一般使用.html">
            
                <a href="1 一般使用.html#查看版本">
            
                    
                    查看版本
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="1 一般使用.html">
            
                <a href="1 一般使用.html#开启python异常">
            
                    
                    开启python异常
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4" data-path="1 一般使用.html">
            
                <a href="1 一般使用.html#安装gdal-ogr错误处理">
            
                    
                    安装GDAL OGR错误处理
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="2 几何.html">
            
                <a href="2 几何.html">
            
                    
                    2 几何
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="2 几何.html">
            
                <a href="2 几何.html#创建点">
            
                    
                    创建点
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="2 几何.html">
            
                <a href="2 几何.html#创建线">
            
                    
                    创建线
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="2 几何.html">
            
                <a href="2 几何.html#创建多边形">
            
                    
                    创建多边形
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4" data-path="2 几何.html">
            
                <a href="2 几何.html#创建带洞的多边形">
            
                    
                    创建带洞的多边形
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.5" data-path="2 几何.html">
            
                <a href="2 几何.html#创建多部件点">
            
                    
                    创建多部件点
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.6" data-path="2 几何.html">
            
                <a href="2 几何.html#创建多部件线">
            
                    
                    创建多部件线
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.7" data-path="2 几何.html">
            
                <a href="2 几何.html#创建多部件多边形">
            
                    
                    创建多部件多边形
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.8" data-path="2 几何.html">
            
                <a href="2 几何.html#创建几何集合">
            
                    
                    创建几何集合
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.9" data-path="2 几何.html">
            
                <a href="2 几何.html#从wkt创建几何">
            
                    
                    从WKT创建几何
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.10" data-path="2 几何.html">
            
                <a href="2 几何.html#从geojson创建几何">
            
                    
                    从GeoJSON创建几何
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.11" data-path="2 几何.html">
            
                <a href="2 几何.html#从gml创建几何">
            
                    
                    从GML创建几何
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.12" data-path="2 几何.html">
            
                <a href="2 几何.html#从wkb创建几何">
            
                    
                    从WKB创建几何
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.13" data-path="2 几何.html">
            
                <a href="2 几何.html#计算点的个数">
            
                    
                    计算点的个数
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.14" data-path="2 几何.html">
            
                <a href="2 几何.html#计算几何个数">
            
                    
                    计算几何个数
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.15" data-path="2 几何.html">
            
                <a href="2 几何.html#迭代几何">
            
                    
                    迭代几何
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.16" data-path="2 几何.html">
            
                <a href="2 几何.html#迭代点">
            
                    
                    迭代点
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.17" data-path="2 几何.html">
            
                <a href="2 几何.html#几何缓冲区">
            
                    
                    几何缓冲区
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.18" data-path="2 几何.html">
            
                <a href="2 几何.html#计算包围盒">
            
                    
                    计算包围盒
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.19" data-path="2 几何.html">
            
                <a href="2 几何.html#计算面积">
            
                    
                    计算面积
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.20" data-path="2 几何.html">
            
                <a href="2 几何.html#计算长度">
            
                    
                    计算长度
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.21" data-path="2 几何.html">
            
                <a href="2 几何.html#获得几何类型">
            
                    
                    获得几何类型
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.22" data-path="2 几何.html">
            
                <a href="2 几何.html#计算几何相交">
            
                    
                    计算几何相交
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.23" data-path="2 几何.html">
            
                <a href="2 几何.html#计算几何并集">
            
                    
                    计算几何并集
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.24" data-path="2 几何.html">
            
                <a href="2 几何.html#输出几何到geojson">
            
                    
                    输出几何到GeoJSON
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.25" data-path="2 几何.html">
            
                <a href="2 几何.html#输出几何到wkt">
            
                    
                    输出几何到WKT
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.26" data-path="2 几何.html">
            
                <a href="2 几何.html#输出几何到kml">
            
                    
                    输出几何到KML
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.27" data-path="2 几何.html">
            
                <a href="2 几何.html#输出几何到wkb">
            
                    
                    输出几何到WKB
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.28" data-path="2 几何.html">
            
                <a href="2 几何.html#强制多边形到多部件多边形">
            
                    
                    强制多边形到多部件多边形
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.29" data-path="2 几何.html">
            
                <a href="2 几何.html#四等分多边形并创建质心">
            
                    
                    四等分多边形并创建质心
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="3 矢量图层.html">
            
                <a href="3 矢量图层.html">
            
                    
                    3 矢量图层
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="3 矢量图层.html">
            
                <a href="3 矢量图层.html#删除文件">
            
                    
                    删除文件
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="3 矢量图层.html">
            
                <a href="3 矢量图层.html#获取ogr驱动列表">
            
                    
                    获取OGR驱动列表
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="3 矢量图层.html">
            
                <a href="3 矢量图层.html#驱动是否可用">
            
                    
                    驱动是否可用
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4" data-path="3 矢量图层.html">
            
                <a href="3 矢量图层.html#获取shapefile要素个数">
            
                    
                    获取shapefile要素个数
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5" data-path="3 矢量图层.html">
            
                <a href="3 矢量图层.html#获取postgis图层">
            
                    
                    获取PostGIS图层
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.6" data-path="3 矢量图层.html">
            
                <a href="3 矢量图层.html#获取postgis图层的要素">
            
                    
                    获取PostGIS图层的要素
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.7" data-path="3 矢量图层.html">
            
                <a href="3 矢量图层.html#获取esri-gdb图层">
            
                    
                    获取ESRI GDB图层
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.8" data-path="3 矢量图层.html">
            
                <a href="3 矢量图层.html#加载数据到内存">
            
                    
                    加载数据到内存
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.9" data-path="3 矢量图层.html">
            
                <a href="3 矢量图层.html#遍历要素">
            
                    
                    遍历要素
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.10" data-path="3 矢量图层.html">
            
                <a href="3 矢量图层.html#遍历要素几何">
            
                    
                    遍历要素几何
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.11" data-path="3 矢量图层.html">
            
                <a href="3 矢量图层.html#过滤属性">
            
                    
                    过滤属性
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.12" data-path="3 矢量图层.html">
            
                <a href="3 矢量图层.html#空间过滤">
            
                    
                    空间过滤
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.13" data-path="3 矢量图层.html">
            
                <a href="3 矢量图层.html#获取要素字段">
            
                    
                    获取要素字段
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.14" data-path="3 矢量图层.html">
            
                <a href="3 矢量图层.html#获取postgis图层字段">
            
                    
                    获取PostGIS图层字段
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.15" data-path="3 矢量图层.html">
            
                <a href="3 矢量图层.html#获取图层能力">
            
                    
                    获取图层能力
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.16" data-path="3 矢量图层.html">
            
                <a href="3 矢量图层.html#wfs图层和遍历要素">
            
                    
                    WFS图层和遍历要素
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.17" data-path="3 矢量图层.html">
            
                <a href="3 矢量图层.html#设置http代理">
            
                    
                    设置HTTP代理
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.18" data-path="3 矢量图层.html">
            
                <a href="3 矢量图层.html#读取csv经纬度作为ogrvrtlayer">
            
                    
                    读取CSV经纬度作为OGRVRTLayer
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.19" data-path="3 矢量图层.html">
            
                <a href="3 矢量图层.html#计算范围">
            
                    
                    计算范围
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.20" data-path="3 矢量图层.html">
            
                <a href="3 矢量图层.html#计算凸包">
            
                    
                    计算凸包
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.21" data-path="3 矢量图层.html">
            
                <a href="3 矢量图层.html#计算质心">
            
                    
                    计算质心
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.22" data-path="3 矢量图层.html">
            
                <a href="3 矢量图层.html#创建新的shp数据并添加数据">
            
                    
                    创建新的shp数据并添加数据
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.23" data-path="3 矢量图层.html">
            
                <a href="3 矢量图层.html#从wkt创建postgis表">
            
                    
                    从WKT创建PostGIS表
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.24" data-path="3 矢量图层.html">
            
                <a href="3 矢量图层.html#过滤和选择">
            
                    
                    过滤和选择
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.25" data-path="3 矢量图层.html">
            
                <a href="3 矢量图层.html#合并图层">
            
                    
                    合并图层
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.26" data-path="3 矢量图层.html">
            
                <a href="3 矢量图层.html#获取osm街道名称">
            
                    
                    获取OSM街道名称
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.27" data-path="3 矢量图层.html">
            
                <a href="3 矢量图层.html#创建鱼网">
            
                    
                    创建鱼网
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.28" data-path="3 矢量图层.html">
            
                <a href="3 矢量图层.html#面转线">
            
                    
                    面转线
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.29" data-path="3 矢量图层.html">
            
                <a href="3 矢量图层.html#创建缓冲区">
            
                    
                    创建缓冲区
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.30" data-path="3 矢量图层.html">
            
                <a href="3 矢量图层.html#栅格化矢量图层">
            
                    
                    栅格化矢量图层
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.31" data-path="3 矢量图层.html">
            
                <a href="3 矢量图层.html#面转点">
            
                    
                    面转点
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="4 栅格图层.html">
            
                <a href="4 栅格图层.html">
            
                    
                    4 栅格图层
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="4 栅格图层.html">
            
                <a href="4 栅格图层.html#关闭栅格数据">
            
                    
                    关闭栅格数据
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="4 栅格图层.html">
            
                <a href="4 栅格图层.html#获取元数据">
            
                    
                    获取元数据
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3" data-path="4 栅格图层.html">
            
                <a href="4 栅格图层.html#波段融合">
            
                    
                    波段融合
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.4" data-path="4 栅格图层.html">
            
                <a href="4 栅格图层.html#获取波段">
            
                    
                    获取波段
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.5" data-path="4 栅格图层.html">
            
                <a href="4 栅格图层.html#遍历波段">
            
                    
                    遍历波段
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.6" data-path="4 栅格图层.html">
            
                <a href="4 栅格图层.html#获取波段信息">
            
                    
                    获取波段信息
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.7" data-path="4 栅格图层.html">
            
                <a href="4 栅格图层.html#多边形化栅格波段">
            
                    
                    多边形化栅格波段
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.8" data-path="4 栅格图层.html">
            
                <a href="4 栅格图层.html#栅格化矢量数据">
            
                    
                    栅格化矢量数据
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.9" data-path="4 栅格图层.html">
            
                <a href="4 栅格图层.html#用shapefile裁剪栅格">
            
                    
                    用shapefile裁剪栅格
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.10" data-path="4 栅格图层.html">
            
                <a href="4 栅格图层.html#区域统计">
            
                    
                    区域统计
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.11" data-path="4 栅格图层.html">
            
                <a href="4 栅格图层.html#从数组创建栅格">
            
                    
                    从数组创建栅格
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.12" data-path="4 栅格图层.html">
            
                <a href="4 栅格图层.html#替换无效值">
            
                    
                    替换无效值
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter active" data-level="1.6" data-path="5 投影.html">
            
                <a href="5 投影.html">
            
                    
                    5 投影
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="5 投影.html">
            
                <a href="5 投影.html#创建投影">
            
                    
                    创建投影
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="5 投影.html">
            
                <a href="5 投影.html#重投影">
            
                    
                    重投影
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3" data-path="5 投影.html">
            
                <a href="5 投影.html#获取投影">
            
                    
                    获取投影
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.4" data-path="5 投影.html">
            
                <a href="5 投影.html#重投影图层">
            
                    
                    重投影图层
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.5" data-path="5 投影.html">
            
                <a href="5 投影.html#输出投影">
            
                    
                    输出投影
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.6" data-path="5 投影.html">
            
                <a href="5 投影.html#创建esri投影文件">
            
                    
                    创建ESRI投影文件
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            本书使用 GitBook 发布
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >5 投影</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="&#x6295;&#x5F71;">&#x6295;&#x5F71;</h1>
<h2 id="&#x521B;&#x5EFA;&#x6295;&#x5F71;">&#x521B;&#x5EFA;&#x6295;&#x5F71;</h2>
<pre><code class="lang-python"><span class="hljs-keyword">from</span> osgeo <span class="hljs-keyword">import</span> osr
spatialRef = osr.SpatialReference()
spatialRef.ImportFromEPSG(<span class="hljs-number">4326</span>) <span class="hljs-comment">#WGS84</span>
</code></pre>
<h2 id="&#x91CD;&#x6295;&#x5F71;">&#x91CD;&#x6295;&#x5F71;</h2>
<pre><code class="lang-python"><span class="hljs-keyword">from</span> osgeo <span class="hljs-keyword">import</span> ogr
<span class="hljs-keyword">from</span> osgeo <span class="hljs-keyword">import</span> osr

source = osr.SpatialReference()
source.ImportFromEPSG(<span class="hljs-number">2927</span>)

target = osr.SpatialReference()
target.ImportFromEPSG(<span class="hljs-number">4326</span>)

transform = osr.CoordinateTransformation(source, target)

point = ogr.CreateGeometryFromWkt(<span class="hljs-string">&quot;POINT (1120351.57 741921.42)&quot;</span>)
point.Transform(transform)

<span class="hljs-keyword">print</span> (point.ExportToWkt())
</code></pre>
<h2 id="&#x83B7;&#x53D6;&#x6295;&#x5F71;">&#x83B7;&#x53D6;&#x6295;&#x5F71;</h2>
<pre><code class="lang-python"><span class="hljs-keyword">from</span> osgeo <span class="hljs-keyword">import</span> ogr, osr
driver = ogr.GetDriverByName(<span class="hljs-string">&apos;ESRI Shapefile&apos;</span>)
dataset = driver.Open(<span class="hljs-string">r&apos;./data/test.shp&apos;</span>)

<span class="hljs-comment"># &#x56FE;&#x5C42;</span>
layer = dataset.GetLayer()
spatialRef = layer.GetSpatialRef()
<span class="hljs-comment"># &#x51E0;&#x4F55;</span>
feature = layer.GetNextFeature()
geom = feature.GetGeometryRef()
spatialRef = geom.GetSpatialReference()
</code></pre>
<h2 id="&#x91CD;&#x6295;&#x5F71;&#x56FE;&#x5C42;">&#x91CD;&#x6295;&#x5F71;&#x56FE;&#x5C42;</h2>
<pre><code class="lang-python"><span class="hljs-keyword">from</span> osgeo <span class="hljs-keyword">import</span> ogr, osr
<span class="hljs-keyword">import</span> os

driver = ogr.GetDriverByName(<span class="hljs-string">&apos;ESRI Shapefile&apos;</span>)

<span class="hljs-comment"># &#x8F93;&#x5165;&#x7A7A;&#x95F4;&#x53C2;&#x8003;</span>
inSpatialRef = osr.SpatialReference()
inSpatialRef.ImportFromEPSG(<span class="hljs-number">2927</span>)

<span class="hljs-comment"># &#x8F93;&#x51FA;&#x7A7A;&#x95F4;&#x53C2;&#x8003;</span>
outSpatialRef = osr.SpatialReference()
outSpatialRef.ImportFromEPSG(<span class="hljs-number">4326</span>)

<span class="hljs-comment"># &#x521B;&#x5EFA;&#x5750;&#x6807;&#x8F6C;&#x6362;</span>
coordTrans = osr.CoordinateTransformation(inSpatialRef, outSpatialRef)

<span class="hljs-comment"># &#x8F93;&#x5165;&#x56FE;&#x5C42;</span>
inDataSet = driver.Open(<span class="hljs-string">r&apos;./data/test.shp&apos;</span>)
inLayer = inDataSet.GetLayer()

<span class="hljs-comment"># &#x521B;&#x5EFA;&#x8F93;&#x51FA;&#x56FE;&#x5C42;</span>
outputShapefile = <span class="hljs-string">r&apos;./data/test_4326.shp&apos;</span>
<span class="hljs-keyword">if</span> os.path.exists(outputShapefile):
    driver.DeleteDataSource(outputShapefile)
outDataSet = driver.CreateDataSource(outputShapefile)
outLayer = outDataSet.CreateLayer(
    <span class="hljs-string">&quot;test_4326&quot;</span>, 
    geom_type=ogr.wkbMultiPolygon,
    srs=outSpatialRef <span class="hljs-comment"># &#x8F93;&#x51FA;prj&#x6587;&#x4EF6;</span>
)

<span class="hljs-comment"># &#x6DFB;&#x52A0;&#x5B57;&#x6BB5;</span>
inLayerDefn = inLayer.GetLayerDefn()
<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(<span class="hljs-number">0</span>, inLayerDefn.GetFieldCount()):
    fieldDefn = inLayerDefn.GetFieldDefn(i)
    outLayer.CreateField(fieldDefn)

outLayerDefn = outLayer.GetLayerDefn()

<span class="hljs-comment"># &#x904D;&#x5386;&#x8981;&#x7D20;</span>
inFeature = inLayer.GetNextFeature()
<span class="hljs-keyword">while</span> inFeature:
    <span class="hljs-comment"># &#x83B7;&#x53D6;&#x51E0;&#x4F55;</span>
    geom = inFeature.GetGeometryRef()
    <span class="hljs-comment"># &#x91CD;&#x6295;&#x5F71;&#x51E0;&#x4F55;</span>
    geom.Transform(coordTrans)
    <span class="hljs-comment"># &#x521B;&#x5EFA;&#x8981;&#x7D20;</span>
    outFeature = ogr.Feature(outLayerDefn)
    <span class="hljs-comment"># &#x8BBE;&#x7F6E;&#x51E0;&#x4F55;&#x3001;&#x5C5E;&#x6027;</span>
    outFeature.SetGeometry(geom)
    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(<span class="hljs-number">0</span>, outLayerDefn.GetFieldCount()):
        outFeature.SetField(outLayerDefn.GetFieldDefn(i).GetNameRef(), inFeature.GetField(i))
    <span class="hljs-comment"># &#x6DFB;&#x52A0;&#x8981;&#x7D20;</span>
    outLayer.CreateFeature(outFeature)
    <span class="hljs-comment"># &#x53D6;&#x6D88;&#x5F15;&#x7528;</span>
    outFeature = <span class="hljs-keyword">None</span>
    inFeature = inLayer.GetNextFeature()

<span class="hljs-comment"># &#x4FDD;&#x5B58;&#x5E76;&#x5173;&#x95ED;</span>
inDataSet = <span class="hljs-keyword">None</span>
outDataSet = <span class="hljs-keyword">None</span>
</code></pre>
<h2 id="&#x8F93;&#x51FA;&#x6295;&#x5F71;">&#x8F93;&#x51FA;&#x6295;&#x5F71;</h2>
<pre><code class="lang-python"><span class="hljs-keyword">from</span> osgeo <span class="hljs-keyword">import</span> ogr, osr
driver = ogr.GetDriverByName(<span class="hljs-string">&apos;ESRI Shapefile&apos;</span>)
dataset = driver.Open(<span class="hljs-string">r&apos;./data/test_4326.shp&apos;</span>)
layer = dataset.GetLayer()
spatialRef = layer.GetSpatialRef()

spatialRef.ExportToWkt()
spatialRef.ExportToPrettyWkt()
spatialRef.ExportToPCI()
spatialRef.ExportToUSGS()
spatialRef.ExportToXML()
</code></pre>
<h2 id="&#x521B;&#x5EFA;esri&#x6295;&#x5F71;&#x6587;&#x4EF6;">&#x521B;&#x5EFA;ESRI&#x6295;&#x5F71;&#x6587;&#x4EF6;</h2>
<pre><code class="lang-python"><span class="hljs-keyword">from</span> osgeo <span class="hljs-keyword">import</span> ogr, osr

spatialRef = osr.SpatialReference()
spatialRef.ImportFromEPSG(<span class="hljs-number">26912</span>)

spatialRef.MorphToESRI()
file = open(<span class="hljs-string">&apos;yourshpfile.prj&apos;</span>, <span class="hljs-string">&apos;w&apos;</span>)
file.write(spatialRef.ExportToWkt())
file.close()
</code></pre>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="4 栅格图层.html#替换无效值" class="navigation navigation-prev " aria-label="Previous page: 替换无效值">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="5 投影.html#创建投影" class="navigation navigation-next " aria-label="Next page: 创建投影">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"5 投影","level":"1.6","depth":1,"next":{"title":"创建投影","level":"1.6.1","depth":2,"anchor":"#创建投影","path":"gitbook/5 投影.md","ref":"gitbook/5 投影.md#创建投影","articles":[]},"previous":{"title":"替换无效值","level":"1.5.12","depth":2,"anchor":"#替换无效值","path":"gitbook/4 栅格图层.md","ref":"gitbook/4 栅格图层.md#替换无效值","articles":[]},"dir":"ltr"},"config":{"plugins":["-lunr","-search","search-pro","-sharing","chapter-fold","github","splitter","code","back-to-top-button","hide-element","donate","auto-scroll-table","lightbox","custom-favicon","pageview-count","livereload"],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"chapter-fold":{},"github":{"url":"https://github.com/luolingchun/py-gdalogr-cookbook-zh"},"livereload":{},"splitter":{},"search-pro":{},"auto-scroll-table":{},"code":{"copyButtons":true},"donate":{"alipay":"https://raw.githubusercontent.com/luolingchun/luolingchun.github.io/master/gitbook/images/alipay.jpg","alipayText":"支付宝打赏","button":"赏","title":"","wechat":"https://raw.githubusercontent.com/luolingchun/luolingchun.github.io/master/gitbook/images/wechat.jpg","wechatText":"微信打赏"},"hide-element":{"elements":[".gitbook-link"]},"fontsettings":{"theme":"white","family":"sans","size":2},"highlight":{},"favicon":"./gitbook/images/favicon.ico","lightbox":{"jquery":true,"sameUuid":false},"back-to-top-button":{},"pageview-count":{},"custom-favicon":{},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","author":"llc","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"GDAL/OGR 中文手册","language":"zh-hans","gitbook":"*","description":"GDAL/OGR 中文手册"},"file":{"path":"gitbook/5 投影.md","mtime":"2020-03-10T06:02:41.955Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2020-03-10T06:07:24.523Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="gitbook.js"></script>
    <script src="theme.js"></script>
    
        
        <script src="gitbook-plugin-search-pro/jquery.mark.min.js"></script>
        
    
        
        <script src="gitbook-plugin-search-pro/search.js"></script>
        
    
        
        <script src="gitbook-plugin-chapter-fold/chapter-fold.js"></script>
        
    
        
        <script src="gitbook-plugin-github/plugin.js"></script>
        
    
        
        <script src="gitbook-plugin-splitter/splitter.js"></script>
        
    
        
        <script src="gitbook-plugin-code/plugin.js"></script>
        
    
        
        <script src="gitbook-plugin-back-to-top-button/plugin.js"></script>
        
    
        
        <script src="gitbook-plugin-hide-element/plugin.js"></script>
        
    
        
        <script src="gitbook-plugin-donate/plugin.js"></script>
        
    
        
        <script src="gitbook-plugin-auto-scroll-table/plugin.js"></script>
        
    
        
        <script src="gitbook-plugin-lightbox/js/lightbox.min.js"></script>
        
    
        
        <script src="gitbook-plugin-pageview-count/plugin.js"></script>
        
    
        
        <script src="gitbook-plugin-livereload/plugin.js"></script>
        
    
        
        <script src="gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

